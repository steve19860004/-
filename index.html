<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¥­å†·æ°£å®‰è£è©•ä¼°ç³»çµ±</title>
    <style>
        :root {
            /* 3. å“ç‰Œè‰²ç³»èª¿æ•´ï¼šé€™è£¡å®šç¾©ä¸»è‰²ï¼Œæ–¹ä¾¿æ—¥å¾Œä¿®æ”¹ */
            --primary-color: #007bff; /* ç§‘æŠ€è— */
            --primary-hover: #0056b3;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
            --accent-green: #28a745;
        }

        body {
            font-family: "Microsoft JhengHei", "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
        }

        .container {
            background-color: var(--card-bg);
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 550px;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        /* 2. åˆ‡æ›æ¨¡å¼çš„ Tab è¨­è¨ˆ */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #888;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .input-section {
            display: none; /* é è¨­éš±è— */
            animation: fadeIn 0.5s;
        }

        .input-section.active {
            display: block; /* åŠ ä¸Š active é¡åˆ¥æ‰æœƒé¡¯ç¤º */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-group {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            transition: border 0.3s;
        }

        input[type="number"]:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .checkbox-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .checkbox-item:last-child {
            margin-bottom: 0;
        }

        .checkbox-item input {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        button.calc-btn {
            width: 100%;
            padding: 14px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s, transform 0.1s;
        }

        button.calc-btn:hover {
            background-color: var(--primary-hover);
        }

        button.calc-btn:active {
            transform: scale(0.98);
        }

        /* çµæœé¡¯ç¤ºå€å¡Š */
        #result {
            margin-top: 25px;
            display: none;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .result-card {
            background-color: #e3f2fd;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .recommendation-card {
            background-color: #d4edda;
            border-left: 5px solid var(--accent-green);
            padding: 15px;
            border-radius: 5px;
        }

        .result-title {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .rec-text {
            color: #155724;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .note {
            font-size: 0.8rem;
            color: #999;
            margin-top: 20px;
            text-align: center;
            line-height: 1.5;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ  å°ˆæ¥­å†·æ°£è©•ä¼°ç³»çµ±</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('dimensions')">è¼¸å…¥é•·å¯¬</button>
        <button class="tab-btn" onclick="switchTab('area')">ç›´æ¥è¼¸å…¥åªæ•¸</button>
    </div>

    <div id="input-dimensions" class="input-section active">
        <div class="input-group">
            <label>æˆ¿é–“é•·åº¦ (å…¬å°º)</label>
            <input type="number" id="length" placeholder="ä¾‹å¦‚ï¼š5.0" step="0.1">
        </div>
        <div class="input-group">
            <label>æˆ¿é–“å¯¬åº¦ (å…¬å°º)</label>
            <input type="number" id="width" placeholder="ä¾‹å¦‚ï¼š4.0" step="0.1">
        </div>
    </div>

    <div id="input-area" class="input-section">
        <div class="input-group">
            <label>æˆ¿é–“åªæ•¸</label>
            <input type="number" id="pingInput" placeholder="ä¾‹å¦‚ï¼š6.5" step="0.1">
        </div>
    </div>

    <label>ç’°å¢ƒæ¢ä»¶ (åŠ æˆä¿‚æ•¸)</label>
    <div class="checkbox-group">
        <label class="checkbox-item">
            <input type="checkbox" id="westSun" value="1.2">
            <span>æœ‰è¥¿æ›¬ (+20%)</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" id="topFloor" value="1.2">
            <span>ä½é ‚æ¨“ (+20%)</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" id="heatSource" value="1.1">
            <span>æŒ‘é«˜ / ç†±æºå¤š (+10%)</span>
        </label>
    </div>

    <button class="calc-btn" onclick="calculateAC()">ç«‹å³è©¦ç®—</button>

    <div id="result">
        <div class="result-card">
            <div class="result-title">ç©ºé–“èˆ‡éœ€æ±‚</div>
            <div><span class="result-value" id="finalPing">0</span> åª</div>
            <div style="margin-top:5px; font-size: 0.9rem; color:#555;">
                éœ€æ±‚èƒ½åŠ›ï¼š<span id="finalKW">0</span> kW (<span id="finalKcal">0</span> kcal/h)
            </div>
        </div>

        <div class="recommendation-card">
            <div class="result-title">ğŸ’¡ å»ºè­°å®‰è£è¦æ ¼</div>
            <div class="rec-text" id="recommendationText">è¨ˆç®—ä¸­...</div>
            <div style="font-size: 0.9rem; margin-top: 5px;">
                (å»ºè­°é¸æ“‡æ­¤ç­‰ç´šæˆ–ä»¥ä¸Šçš„æ©Ÿå‹)
            </div>
        </div>
    </div>

    <div class="note">
        * æ¨è–¦é‚è¼¯æ¡ã€Œå‘ä¸Šå–æ•´ã€è‡³å¸¸è¦‹è¦æ ¼ï¼Œç¢ºä¿å†·æˆ¿æ•ˆæœè¶³å¤ ã€‚<br>
        * å¯¦éš›å®‰è£è«‹è€ƒé‡å®¤å…§å¤–æ©Ÿç®¡ç·šé•·åº¦èˆ‡ç¾å ´ç‹€æ³ã€‚
    </div>
</div>

<script>
    let currentMode = 'dimensions'; // è¿½è¹¤ç›®å‰æ˜¯å“ªç¨®æ¨¡å¼

    // åˆ‡æ›è¼¸å…¥æ¨¡å¼çš„å‡½å¼
    function switchTab(mode) {
        currentMode = mode;
        
        // æ›´æ–° Tab æŒ‰éˆ•å¤–è§€
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // åˆ‡æ›è¼¸å…¥å€å¡Šé¡¯ç¤º
        document.querySelectorAll('.input-section').forEach(sec => sec.classList.remove('active'));
        if(mode === 'dimensions') {
            document.getElementById('input-dimensions').classList.add('active');
        } else {
            document.getElementById('input-area').classList.add('active');
        }
        
        // éš±è—çµæœï¼Œé¿å…æ··æ·†
        document.getElementById('result').style.display = 'none';
    }

    function calculateAC() {
        let ping = 0;

        // åˆ¤æ–·ç›®å‰æ¨¡å¼ä»¥å–å¾—åªæ•¸
        if (currentMode === 'dimensions') {
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            if (!length || !width) { alert("è«‹è¼¸å…¥é•·å¯¬ï¼"); return; }
            ping = length * width * 0.3025;
        } else {
            ping = parseFloat(document.getElementById('pingInput').value);
            if (!ping) { alert("è«‹è¼¸å…¥åªæ•¸ï¼"); return; }
        }

        // åŸºç¤é‹ç®— (æ¯åª 500 kcal)
        let requiredKcal = ping * 500;

        // ç’°å¢ƒåŠ æˆ
        if (document.getElementById('westSun').checked) requiredKcal *= 1.2;
        if (document.getElementById('topFloor').checked) requiredKcal *= 1.2;
        if (document.getElementById('heatSource').checked) requiredKcal *= 1.1;

        // æ›ç®— kW (1 kW = 860 kcal/h)
        const requiredKW = requiredKcal / 860;

        // é¡¯ç¤ºæ•¸æ“šçµæœ
        document.getElementById('finalPing').innerText = ping.toFixed(1);
        document.getElementById('finalKW').innerText = requiredKW.toFixed(2);
        document.getElementById('finalKcal').innerText = Math.round(requiredKcal);

        // --- æ ¸å¿ƒé‚è¼¯ï¼šå‹è™Ÿæ¨è–¦ ---
        // å°ç£å¸¸è¦‹å†·æ°£ç´šè· (kW)
        const standardSizes = [2.2, 2.8, 3.6, 4.1, 5.0, 6.3, 7.1, 8.0, 9.0];
        let recommendedSize = null;

        // å°‹æ‰¾ç¬¬ä¸€å€‹å¤§æ–¼éœ€æ±‚çš„è¦æ ¼
        for (let size of standardSizes) {
            if (size >= requiredKW) {
                recommendedSize = size;
                break;
            }
        }

        const recTextElement = document.getElementById('recommendationText');
        
        if (recommendedSize) {
            recTextElement.innerHTML = `ğŸ‘‰ ${recommendedSize} kW å‹è™Ÿ`;
        } else {
            // è¶…éæœ€å¤§è¦æ ¼
            recTextElement.innerHTML = `éœ€æ±‚éå¤§ (${requiredKW.toFixed(1)} kW)ï¼Œå»ºè­°å®‰è£å…©å°æˆ–ä½¿ç”¨å•†ç”¨æ©Ÿç¨®`;
        }

        // é¡¯ç¤ºçµæœå€
        document.getElementById('result').style.display = 'block';
    }
</script>

</body>
</html>